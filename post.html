<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK Community ‚Äì Ultimate Post Experience</title>

    <!-- üî• Dynamic Meta for SEO -->
    <meta id="meta-title" name="title" content="">
    <meta id="meta-description" name="description" content="">
    <meta id="meta-og-title" property="og:title" content="">
    <meta id="meta-og-desc" property="og:description" content="">
    <meta id="meta-og-image" property="og:image" content="">
    <meta property="og:type" content="article">

    <link rel="icon" href="https://deepakchauhanxai.xyz/images/dk-community.jpg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * { 
            box-sizing: border-box; 
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #3b82f6;
            --secondary: #f97316;
            --accent: #8b5cf6;
            --dark: #0f172a;
            --light: #f8fafc;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* üî• Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: radial-gradient(circle at 20% 80%, rgba(123, 97, 255, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 97, 150, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(97, 255, 184, 0.1) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(1deg); }
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: floatParticle 15s infinite linear;
        }

        @keyframes floatParticle {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(20px); opacity: 0; }
        }

        .page-wrap {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* üîπ Header ‚Äì DK Community x AI Bhai */
        .dk-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            border-radius: 20px;
            background: rgba(255,255,255,0.95);
            box-shadow: 0 10px 30px rgba(15,23,42,0.15);
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }

        .dk-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }

        .dk-header:hover::before {
            left: 100%;
        }

        .dk-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dk-avatar {
            width: 50px;
            height: 50px;
            border-radius: 16px;
            overflow: hidden;
            border: 3px solid var(--primary);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            transition: transform 0.3s ease;
        }

        .dk-avatar:hover {
            transform: rotate(5deg) scale(1.05);
        }

        .dk-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dk-text {
            display: flex;
            flex-direction: column;
        }

        .dk-text .title {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dk-text .subtitle {
            font-size: 13px;
            color: #6b7280;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .lang-indicator {
            font-size: 13px;
            font-weight: 500;
            color: #4b5563;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            color: var(--primary);
            transform: rotate(30deg);
        }

        /* üîπ Card */
        .post-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(15,23,42,0.15);
            overflow: hidden;
            animation: cardEntrance 0.6s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 25px;
            transform: translateY(0);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 60px rgba(15,23,42,0.2);
        }

        @keyframes cardEntrance {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .post-img-wrap {
            position: relative;
            background: var(--dark);
            overflow: hidden;
        }

        .post-img {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            background: var(--dark);
            transition: transform 0.5s ease;
            cursor: zoom-in;
        }

        .post-img:hover {
            transform: scale(1.02);
        }

        .post-chip {
            position: absolute;
            left: 20px;
            bottom: 20px;
            padding: 8px 16px;
            background: rgba(15,23,42,0.85);
            color: #e5e7eb;
            border-radius: 50px;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .post-chip span {
            font-size: 16px;
        }

        .post-content {
            padding: 25px 30px 30px;
        }

        .post-title {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 15px;
            color: var(--dark);
            line-height: 1.3;
            position: relative;
            padding-bottom: 15px;
        }

        .post-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .post-desc {
            font-size: 16px;
            line-height: 1.8;
            color: #4b5563;
            white-space: pre-line;
            margin-bottom: 25px;
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: #9ca3af;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f1f5f9;
        }

        /* üî• Reactions Bar */
        .reactions-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .reaction-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 50px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reaction-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .reaction-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Control Row */
        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #f1f5f9;
            color: #475569;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn.primary {
            background: var(--primary);
            color: white;
        }

        .btn.secondary {
            background: var(--secondary);
            color: white;
        }

        .btn.accent {
            background: var(--accent);
            color: white;
        }

        .btn.danger {
            background: var(--danger);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .bottom-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #f1f5f9;
        }

        .back-link {
            font-size: 14px;
            font-weight: 500;
            color: var(--primary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            padding: 8px 16px;
            border-radius: 50px;
            background: rgba(59, 130, 246, 0.1);
        }

        .back-link:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateX(-5px);
        }

        .signature {
            font-size: 12px;
            color: #9ca3af;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* üî• Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
            z-index: 1000;
        }

        .reading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }

        /* üî• Floating Actions */
        .floating-actions {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 100;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .fab::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .fab:active::after {
            width: 100%;
            height: 100%;
        }

        .fab:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.5);
        }

        .fab.secondary {
            background: var(--secondary);
            box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
        }

        .fab.accent {
            background: var(--accent);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        /* üî• Engagement Stats */
        .engagement-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: #f8fafc;
            border-radius: 12px;
            font-size: 14px;
            color: #475569;
        }

        .stat span:first-child {
            font-size: 18px;
        }

        /* üî• Skeleton Loader */
        .skeleton-wrap {
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(15,23,42,0.15);
            backdrop-filter: blur(10px);
            margin-bottom: 25px;
        }

        .skeleton {
            background: linear-gradient(90deg, #e5e7eb, #f9fafb, #e5e7eb);
            background-size: 300% 100%;
            animation: skeleton 1.5s ease infinite;
            border-radius: 8px;
        }

        @keyframes skeleton {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .skeleton-img {
            width: 100%;
            height: 300px;
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .skeleton-line {
            height: 16px;
            margin-bottom: 12px;
        }

        .skeleton-line.short {
            width: 40%;
        }

        .skeleton-line.mid {
            width: 65%;
        }

        .skeleton-line.long {
            width: 85%;
        }

        /* üî• Image Viewer Modal */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .image-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .modal-img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .modal-close {
            position: absolute;
            top: -40px;
            right: 0;
            background: none;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dk-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .header-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .post-title {
                font-size: 24px;
            }
            
            .post-desc {
                font-size: 15px;
            }
            
            .post-content {
                padding: 20px;
            }
            
            .floating-actions {
                bottom: 20px;
                right: 20px;
            }
            
            .fab {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .page-wrap {
                padding: 15px;
            }
            
            .post-title {
                font-size: 22px;
            }
            
            .control-row {
                flex-direction: column;
            }
            
            .btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- üî• Animated Background -->
    <div class="animated-bg"></div>
    <div class="particles" id="particles"></div>
    
    <!-- üî• Reading Progress Bar -->
    <div class="reading-progress">
        <div class="reading-progress-bar" id="readingProgress"></div>
    </div>

    <div class="page-wrap">
        <!-- üîπ DK Community Header -->
        <header class="dk-header">
            <div class="dk-brand">
                <div class="dk-avatar">
                    <img src="https://deepakchauhanxai.xyz/images/dk-community.jpg" alt="DK Community">
                </div>
                <div class="dk-text">
                    <span class="title">DK Community √ó AI Bhai</span>
                    <span class="subtitle">Human + AI Real Stories & Suvichar</span>
                </div>
            </div>
            <div class="header-controls">
                <div class="lang-indicator">
                    <i class="fas fa-globe"></i>
                    <span id="langLabel">Language: ENGLISH</span>
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- üîπ Skeleton while loading -->
        <div id="loader" class="skeleton-wrap">
            <div class="skeleton skeleton-img"></div>
            <div class="skeleton skeleton-line long"></div>
            <div class="skeleton skeleton-line mid"></div>
            <div class="skeleton skeleton-line short"></div>
            <div class="skeleton skeleton-line long"></div>
            <div class="skeleton skeleton-line mid"></div>
        </div>

        <!-- üîπ Real Card -->
        <article id="postCard" class="post-card" style="display:none;">
            <div class="post-img-wrap">
                <img id="postImg" class="post-img" src="" alt="">
                <div class="post-chip">
                    <span>‚ö°</span>
                    <span id="postCategory">Motivation</span>
                </div>
            </div>
            <div class="post-content">
                <!-- Engagement Stats -->
                <div class="engagement-stats">
                    <div class="stat">
                        <span>üëÅÔ∏è</span>
                        <span id="viewCount">1.2K Views</span>
                    </div>
                    <div class="stat">
                        <span>‚≠ê</span>
                        <span id="likePercentage">89% Liked</span>
                    </div>
                    <div class="stat">
                        <span>‚è±Ô∏è</span>
                        <span id="readTime">3 min read</span>
                    </div>
                </div>

                <div class="meta-row">
                    <span id="metaCategory">#motivational</span>
                    <span id="metaId">ID: -</span>
                </div>

                <h1 id="postTitle" class="post-title"></h1>
                <p id="postDesc" class="post-desc"></p>

                <!-- üî• Reactions Bar -->
                <div class="reactions-bar">
                    <button class="reaction-btn" data-emoji="üî•">
                        <span>üî•</span>
                        <span id="reactionFire">24</span>
                    </button>
                    <button class="reaction-btn" data-emoji="‚ù§Ô∏è">
                        <span>‚ù§Ô∏è</span>
                        <span id="reactionHeart">42</span>
                    </button>
                    <button class="reaction-btn" data-emoji="üëè">
                        <span>üëè</span>
                        <span id="reactionClap">18</span>
                    </button>
                    <button class="reaction-btn" data-emoji="üí°">
                        <span>üí°</span>
                        <span id="reactionIdea">9</span>
                    </button>
                </div>

                <!-- üîπ Controls: Favorite, Download, Share -->
                <div class="control-row">
                    <button id="favBtn" class="btn">
                        <i class="fas fa-heart"></i>
                        <span>Add to Favorites</span>
                    </button>

                    <button id="downloadBtn" class="btn secondary">
                        <i class="fas fa-download"></i>
                        <span>Download</span>
                    </button>

                    <button id="shareBtn" class="btn primary">
                        <i class="fas fa-share-alt"></i>
                        <span>Share</span>
                    </button>
                    
                    <button id="speakBtn" class="btn accent">
                        <i class="fas fa-volume-up"></i>
                        <span>Read Aloud</span>
                    </button>
                </div>

                <div class="bottom-row">
                    <a href="index.html" class="back-link">
                        <i class="fas fa-arrow-left"></i>
                        Back to DK Community
                    </a>
                    <span class="signature">
                        <i class="fas fa-code"></i>
                        Deepak Chauhan √ó AI Bhai
                    </span>
                </div>
            </div>
        </article>

        <!-- üî• Suggested Posts (Placeholder) -->
        <div class="post-card" style="padding: 25px;">
            <h3 style="margin-bottom: 15px; color: var(--dark);">You might also like</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                <div style="background: #f8fafc; padding: 15px; border-radius: 12px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="height: 120px; background: #e5e7eb; border-radius: 8px; margin-bottom: 10px;"></div>
                    <div style="font-size: 14px; font-weight: 500;">Success Mindset</div>
                </div>
                <div style="background: #f8fafc; padding: 15px; border-radius: 12px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="height: 120px; background: #e5e7eb; border-radius: 8px; margin-bottom: 10px;"></div>
                    <div style="font-size: 14px; font-weight: 500;">Life Lessons</div>
                </div>
                <div style="background: #f8fafc; padding: 15px; border-radius: 12px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="height: 120px; background: #e5e7eb; border-radius: 8px; margin-bottom: 10px;"></div>
                    <div style="font-size: 14px; font-weight: 500;">Daily Motivation</div>
                </div>
            </div>
        </div>
    </div>

    <!-- üî• Floating Actions -->
    <div class="floating-actions">
        <button class="fab" id="scrollTopBtn">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button class="fab secondary" id="themeFab">
            <i class="fas fa-moon"></i>
        </button>
        <button class="fab accent" id="speakFab">
            <i class="fas fa-volume-up"></i>
        </button>
    </div>

    <!-- üî• Image Viewer Modal -->
    <div class="image-modal" id="imageModal">
        <div class="modal-content">
            <img class="modal-img" id="modalImg" src="" alt="">
            <button class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random position and animation delay
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // Initialize particles
        createParticles();

        let currentPost = null;
        let currentLang = "en";
        let isSpeaking = false;
        let speechSynth = window.speechSynthesis;

        // ‚≠ê Language detection
        function detectLang() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlLang = urlParams.get('lang');
            if (urlLang) return urlLang;

            const saved = localStorage.getItem("selectedLanguage");
            if (saved) return saved;

            const browserLang = (navigator.language || "en").slice(0, 2);
            const supported = ["en","hi","ur","mr","es","fr","de","ja","zh","ar","pt","ru","bn","ta","te","kn","gu","pa"];
            return supported.includes(browserLang) ? browserLang : "en";
        }

        // ‚≠ê Language sync system
        function syncLanguage() {
            const newLang = detectLang();
            if (newLang !== currentLang) {
                currentLang = newLang;
                updateLangLabel();
                
                const url = new URL(window.location);
                url.searchParams.set('lang', newLang);
                window.history.replaceState({}, '', url);
                
                if (currentPost) {
                    renderPost();
                }
            }
        }

        function updateLangLabel() {
            const el = document.getElementById("langLabel");
            if (el) {
                const langNames = {
                    en: "ENGLISH", hi: "HINDI", ur: "URDU", mr: "MARATHI", 
                    es: "SPANISH", fr: "FRENCH", de: "GERMAN", ja: "JAPANESE",
                    zh: "CHINESE", ar: "ARABIC", pt: "PORTUGUESE", ru: "RUSSIAN",
                    bn: "BENGALI", ta: "TAMIL", te: "TELUGU", kn: "KANNADA",
                    gu: "GUJARATI", pa: "PUNJABI"
                };
                el.textContent = "Language: " + (langNames[currentLang] || currentLang.toUpperCase());
            }
            document.documentElement.lang = currentLang;
        }

        // ‚≠ê Fill UI from currentPost + lang
        function renderPost() {
            if (!currentPost) return;

            const title = currentPost.title[currentLang] || currentPost.title["en"] || "";
            const desc  = currentPost.description[currentLang] || currentPost.description["en"] || "";
            const imgUrl = currentPost.url;
            const cat    = currentPost.category || "motivational";

            document.getElementById("postImg").src = imgUrl;
            document.getElementById("postImg").alt = title;
            document.getElementById("postTitle").textContent = title;
            document.getElementById("postDesc").textContent = desc;
            document.getElementById("postCategory").textContent = cat.toUpperCase();
            document.getElementById("metaCategory").textContent = "#" + cat;
            document.getElementById("metaId").textContent = "ID: " + currentPost.id;

            // Calculate reading time
            const wordCount = desc.split(' ').length;
            const readTime = Math.ceil(wordCount / 200);
            document.getElementById("readTime").textContent = `${readTime} min read`;

            // SEO meta update
            document.getElementById("meta-title").content = title;
            document.getElementById("meta-description").content = desc.slice(0, 150);
            document.getElementById("meta-og-title").content = title;
            document.getElementById("meta-og-desc").content = desc.slice(0, 150);
            document.getElementById("meta-og-image").content = imgUrl;

            updateFavoriteButton();
        }

        // ‚≠ê Favorite system
        function getFavorites() {
            try {
                return JSON.parse(localStorage.getItem("dkFavorites") || "[]");
            } catch {
                return [];
            }
        }

        function isFavorite(id) {
            return getFavorites().some(f => f.id === id);
        }

        function updateFavoriteButton() {
            const favBtn = document.getElementById("favBtn");
            if (!favBtn || !currentPost) return;

            const span = favBtn.querySelector("span");
            const icon = favBtn.querySelector("i");
            if (isFavorite(currentPost.id)) {
                favBtn.classList.add("danger");
                span.textContent = "Remove Favorite";
                icon.className = "fas fa-heart";
            } else {
                favBtn.classList.remove("danger");
                span.textContent = "Add to Favorites";
                icon.className = "fas fa-heart";
            }
        }

        function toggleFavorite() {
            if (!currentPost) return;

            let favs = getFavorites();
            const idx = favs.findIndex(f => f.id === currentPost.id);

            if (idx > -1) {
                favs.splice(idx, 1);
            } else {
                favs.push(currentPost);
            }

            localStorage.setItem("dkFavorites", JSON.stringify(favs));
            updateFavoriteButton();
        }

        // ‚≠ê Download
        function downloadImage(url) {
            try {
                const link = document.createElement("a");
                link.href = url;
                link.download = url.split("/").pop() || "dk-community-image.jpg";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (e) {
                alert("Download failed.");
            }
        }

        // ‚≠ê Share
        function sharePost() {
            if (!currentPost) return;
            const title = currentPost.title[currentLang] || currentPost.title["en"] || "DK Community";
            const text  = currentPost.description[currentLang] || currentPost.description["en"] || "";
            
            const url = new URL(window.location);
            url.searchParams.set('lang', currentLang);
            const shareUrl = url.toString();

            if (navigator.share) {
                navigator.share({ title, text, url: shareUrl }).catch(() => {});
            } else {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert("Link copied to clipboard!");
                }).catch(() => {
                    prompt("Copy this link:", shareUrl);
                });
            }
        }

        // ‚≠ê Text-to-Speech
        function speakPost() {
            if (!currentPost) return;
            
            if (isSpeaking) {
                speechSynth.cancel();
                isSpeaking = false;
                updateSpeakButton();
                return;
            }
            
            const title = currentPost.title[currentLang] || currentPost.title["en"] || "";
            const desc  = currentPost.description[currentLang] || currentPost.description["en"] || "";
            const text = `${title}. ${desc}`;
            
            const speech = new SpeechSynthesisUtterance();
            speech.text = text;
            speech.rate = 0.9;
            speech.pitch = 1;
            speech.volume = 1;
            speech.lang = currentLang;
            
            speech.onend = function() {
                isSpeaking = false;
                updateSpeakButton();
            };
            
            speech.onerror = function() {
                isSpeaking = false;
                updateSpeakButton();
            };
            
            speechSynth.speak(speech);
            isSpeaking = true;
            updateSpeakButton();
        }

        function updateSpeakButton() {
            const speakBtn = document.getElementById("speakBtn");
            const speakFab = document.getElementById("speakFab");
            const icon = speakBtn.querySelector("i");
            const text = speakBtn.querySelector("span");
            
            if (isSpeaking) {
                icon.className = "fas fa-stop";
                text.textContent = "Stop";
                speakBtn.classList.add("danger");
            } else {
                icon.className = "fas fa-volume-up";
                text.textContent = "Read Aloud";
                speakBtn.classList.remove("danger");
            }
            
            // Update FAB
            if (speakFab) {
                speakFab.querySelector("i").className = isSpeaking ? "fas fa-stop" : "fas fa-volume-up";
            }
        }

        // ‚≠ê Image Viewer
        function openImageViewer() {
            if (!currentPost) return;
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("modalImg");
            
            modalImg.src = currentPost.url;
            modal.classList.add("active");
        }

        function closeImageViewer() {
            const modal = document.getElementById("imageModal");
            modal.classList.remove("active");
        }

        // ‚≠ê Reading Progress
        function updateReadingProgress() {
            const progressBar = document.getElementById("readingProgress");
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight - windowHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            const progress = (scrollTop / documentHeight) * 100;
            progressBar.style.width = progress + '%';
        }

        // ‚≠ê Scroll to Top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ‚≠ê Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle("dark-theme");
            const themeToggle = document.getElementById("themeToggle");
            const themeFab = document.getElementById("themeFab");
            
            if (document.body.classList.contains("dark-theme")) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                themeFab.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                themeFab.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        // ‚≠ê Reactions
        function setupReactions() {
            const reactionBtns = document.querySelectorAll('.reaction-btn');
            
            reactionBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const emoji = this.getAttribute('data-emoji');
                    const countEl = this.querySelector('span:last-child');
                    let count = parseInt(countEl.textContent);
                    
                    if (this.classList.contains('active')) {
                        this.classList.remove('active');
                        countEl.textContent = count - 1;
                    } else {
                        this.classList.add('active');
                        countEl.textContent = count + 1;
                    }
                });
            });
        }

        // ‚≠ê MAIN LOAD
        (function(){
            // Initialize language
            currentLang = detectLang();
            updateLangLabel();

            // Set up event listeners
            window.addEventListener('scroll', updateReadingProgress);
            document.getElementById('scrollTopBtn').addEventListener('click', scrollToTop);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('themeFab').addEventListener('click', toggleTheme);
            document.getElementById('speakBtn').addEventListener('click', speakPost);
            document.getElementById('speakFab').addEventListener('click', speakPost);
            document.getElementById('postImg').addEventListener('click', openImageViewer);
            document.getElementById('modalClose').addEventListener('click', closeImageViewer);
            document.getElementById('imageModal').addEventListener('click', function(e) {
                if (e.target === this) closeImageViewer();
            });

            setupReactions();

            const params = new URLSearchParams(window.location.search);
            const idParam = params.get("id");
            const postId = parseInt(idParam, 10);

            if (!postId) {
                document.body.innerHTML = "<h2 style='text-align:center;margin-top:40px;color:white;'>Invalid Post</h2>";
                return;
            }

            // Simulate loading data (replace with actual API call)
            setTimeout(() => {
                // Mock data for demonstration
                const mockPost = {
                    id: postId,
                    title: {
                        en: "The Power of Persistence: How Consistency Beats Talent",
                        hi: "‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø: ‡§ï‡•à‡§∏‡•á ‡§®‡§ø‡§∞‡§Ç‡§§‡§∞‡§§‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ ‡§ï‡•ã ‡§π‡§∞‡§æ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à"
                    },
                    description: {
                        en: "Success is not about being the most talented person in the room. It's about showing up every single day, even when you don't feel like it. The world's most accomplished people weren't necessarily the smartest or most gifted - they were simply the most persistent.\n\nEvery great achievement is the result of countless small efforts repeated day after day. The writer who publishes a bestselling novel wrote one page at a time. The athlete who wins Olympic gold trained when others were sleeping. The entrepreneur who built a million-dollar business faced rejection after rejection before finding success.\n\nYour consistency is your superpower. While others are waiting for motivation or perfect conditions, you're making progress. While they're making excuses, you're making moves. Talent might get you noticed, but persistence is what gets you results.\n\nRemember: The oak tree was once just a little nut that held its ground. Your daily efforts, no matter how small, are compounding into something extraordinary. Keep showing up.",
                        hi: "‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡§Æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ‡§∂‡§æ‡§≤‡•Ä ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§Ø‡§π ‡§π‡§∞ ‡§è‡§ï ‡§¶‡§ø‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§π‡•à, ‡§≠‡§≤‡•á ‡§π‡•Ä ‡§Ü‡§™‡§ï‡•ã ‡§ê‡§∏‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§® ‡§π‡•ã‡•§ ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§∏‡§¨‡§∏‡•á ‡§∏‡§´‡§≤ ‡§≤‡•ã‡§ó ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø ‡§∏‡§¨‡§∏‡•á ‡§ö‡§§‡•Å‡§∞ ‡§Ø‡§æ ‡§∏‡§¨‡§∏‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ‡§∂‡§æ‡§≤‡•Ä ‡§•‡•á - ‡§µ‡•á ‡§¨‡§∏ ‡§∏‡§¨‡§∏‡•á ‡§¶‡•É‡§¢‡§º ‡§•‡•á‡•§\n\n‡§π‡§∞ ‡§¨‡§°‡§º‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø ‡§¶‡§ø‡§®-‡§¨-‡§¶‡§ø‡§® ‡§¶‡•ã‡§π‡§∞‡§æ‡§è ‡§ó‡§è ‡§Ö‡§®‡§ó‡§ø‡§®‡§§ ‡§õ‡•ã‡§ü‡•á ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§π‡•à‡•§ ‡§ú‡§ø‡§∏ ‡§≤‡•á‡§ñ‡§ï ‡§®‡•á ‡§¨‡•á‡§∏‡•ç‡§ü‡§∏‡•á‡§≤‡§ø‡§Ç‡§ó ‡§â‡§™‡§®‡•ç‡§Ø‡§æ‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ, ‡§â‡§∏‡§®‡•á ‡§è‡§ï ‡§∏‡§Æ‡§Ø ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§™‡•É‡§∑‡•ç‡§† ‡§≤‡§ø‡§ñ‡§æ‡•§ ‡§ú‡§ø‡§∏ ‡§è‡§•‡§≤‡•Ä‡§ü ‡§®‡•á ‡§ì‡§≤‡§Ç‡§™‡§ø‡§ï ‡§∏‡•ç‡§µ‡§∞‡•ç‡§£ ‡§™‡§¶‡§ï ‡§ú‡•Ä‡§§‡§æ, ‡§µ‡§π ‡§§‡§¨ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§≤‡•á‡§§‡§æ ‡§•‡§æ ‡§ú‡§¨ ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•ã ‡§∞‡§π‡•á ‡§π‡•ã‡§§‡•á ‡§•‡•á‡•§ ‡§ú‡§ø‡§∏ ‡§â‡§¶‡•ç‡§Ø‡§Æ‡•Ä ‡§®‡•á ‡§Æ‡§ø‡§≤‡§ø‡§Ø‡§®-‡§°‡•â‡§≤‡§∞ ‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§¨‡§®‡§æ‡§Ø‡§æ, ‡§â‡§∏‡•á ‡§∏‡§´‡§≤‡§§‡§æ ‡§Æ‡§ø‡§≤‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§‡§ø ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡§®‡§æ ‡§™‡§°‡§º‡§æ‡•§\n\n‡§Ü‡§™‡§ï‡•Ä ‡§®‡§ø‡§∞‡§Ç‡§§‡§∞‡§§‡§æ ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡•Å‡§™‡§∞‡§™‡§æ‡§µ‡§∞ ‡§π‡•à‡•§ ‡§ú‡§¨‡§ï‡§ø ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ ‡§Ø‡§æ ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç, ‡§Ü‡§™ ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§ú‡§¨ ‡§µ‡•á ‡§¨‡§π‡§æ‡§®‡•á ‡§¨‡§®‡§æ ‡§∞‡§π‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡§¨ ‡§Ü‡§™ ‡§ï‡§¶‡§Æ ‡§â‡§†‡§æ ‡§∞‡§π‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§¶‡•á‡§ñ‡•á ‡§ú‡§æ‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§¨‡§®‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§¶‡•É‡§¢‡§º‡§§‡§æ ‡§π‡•Ä ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§\n\n‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡•á‡§Ç: ‡§ì‡§ï ‡§ï‡§æ ‡§™‡•á‡§°‡§º ‡§ï‡§≠‡•Ä ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§∏‡§æ ‡§®‡§ü ‡§•‡§æ ‡§ú‡§ø‡§∏‡§®‡•á ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§Æ‡•Ä‡§® ‡§™‡§ï‡§°‡§º ‡§∞‡§ñ‡•Ä ‡§•‡•Ä‡•§ ‡§Ü‡§™‡§ï‡•á ‡§¶‡•à‡§®‡§ø‡§ï ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏, ‡§ö‡§æ‡§π‡•á ‡§ï‡§ø‡§§‡§®‡•á ‡§≠‡•Ä ‡§õ‡•ã‡§ü‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§® ‡§π‡•ã‡§Ç, ‡§ï‡•Å‡§õ ‡§Ö‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§¶‡§ø‡§ñ‡§æ‡§§‡•á ‡§∞‡§π‡•ã‡•§"
                    },
                    url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                    category: "motivation"
                };

                currentPost = mockPost;
                renderPost();

                // Show card, hide loader
                setTimeout(() => {
                    const loader = document.getElementById("loader");
                    const card   = document.getElementById("postCard");
                    if (loader) loader.style.display = "none";
                    if (card)   card.style.display = "block";
                }, 500);

                // Buttons
                document.getElementById("favBtn").onclick = toggleFavorite;
                document.getElementById("downloadBtn").onclick = () => downloadImage(currentPost.url);
                document.getElementById("shareBtn").onclick = sharePost;
            }, 1500);
        })();

        // Real-time language sync
        window.addEventListener("languageChanged", syncLanguage);
        window.addEventListener("storage", (e) => {
            if (e.key === "selectedLanguage") {
                syncLanguage();
            }
        });

        // Check for language changes periodically
        setInterval(syncLanguage, 2000);
    </script>
</body>
</html>
