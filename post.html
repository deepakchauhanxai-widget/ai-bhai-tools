<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK Community ‚Äì Post</title>

    <!-- üî• Dynamic Meta for SEO -->
    <meta id="meta-title" name="title" content="">
    <meta id="meta-description" name="description" content="">
    <meta id="meta-image" property="og:image" content="">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: #f2f2f2;
        }

        .post-container {
            max-width: 680px;
            margin: 25px auto;
            padding: 15px;
        }

        .post-card {
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: fadeIn 0.4s ease-in-out;
        }

        @keyframes fadeIn {
            from {opacity:0; transform: translateY(20px);}
            to {opacity:1; transform: translateY(0);}
        }

        .post-img {
            width: 100%;
            display: block;
            border-bottom: 1px solid #ddd;
        }

        .post-content {
            padding: 18px;
        }

        .post-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #222;
        }

        .post-desc {
            font-size: 16px;
            line-height: 1.6;
            color: #444;
            margin-bottom: 20px;
        }

        .share-box {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            cursor: pointer;
            background: #3B82F6;
            color: #fff;
            font-weight: 500;
            transition: 0.2s ease;
        }

        .btn:hover {
            background: #2563eb;
        }

        .back-btn {
            background: #10b981;
        }

        .back-btn:hover {
            background: #059669;
        }

        /* üî• Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #e0e0e0, #f8f8f8, #e0e0e0);
            background-size: 400% 400%;
            animation: skeleton 1.2s ease infinite;
        }

        @keyframes skeleton {
            0% { background-position: 0 0; }
            100% { background-position: -135% 0; }
        }

        .skeleton-img {
            width: 100%;
            height: 320px;
            border-radius: 10px;
        }

        .skeleton-text {
            height: 18px;
            width: 90%;
            margin: 12px 0;
            border-radius: 6px;
        }
    </style>
</head>
<body>

<div class="post-container">

    <!-- üî• Skeleton Loader (Auto hide later) -->
    <div id="loader">
        <div class="skeleton skeleton-img"></div>
        <div class="skeleton skeleton-text"></div>
        <div class="skeleton skeleton-text" style="width:70%"></div>
    </div>

    <!-- üî• Real Post -->
    <div class="post-card" id="postCard" style="display:none;">
        <img id="postImg" class="post-img" src="" alt="">
        <div class="post-content">
            <h2 id="postTitle" class="post-title"></h2>
            <p id="postDesc" class="post-desc"></p>

            <!-- ‚≠ê Share + Back -->
            <div class="share-box">
                <button class="btn back-btn" onclick="history.back()">‚¨Ö Back</button>
                <button class="btn" onclick="sharePost()">üîó Share</button>
            </div>
        </div>
    </div>

    <!-- üî• (SAFE FOR APPROVAL) Google Ads Placeholder -->
    <!--
    <div style="margin-top:20px;">
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-XXXXXXXXX"
            data-ad-slot="YYYYYYYY"
            data-ad-format="auto">
        </ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
    -->
</div>


<script>
// ‚≠ê Get ID from URL
const params = new URLSearchParams(window.location.search);
const postId = parseInt(params.get("id"));

// ‚≠ê Load selected language
const lang = localStorage.getItem("selectedLanguage") || "en";

// ‚≠ê Fetch JSON
fetch("https://deepakchauhanxai.xyz/testing/data/images.json?v=" + Date.now())
    .then(res => res.json())
    .then(data => {
        const post = data.images.find(img => img.id === postId);

        if (!post) {
            document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>Post Not Found</h2>";
            return;
        }

        // ‚≠ê Fill data
        document.getElementById("postImg").src = post.url;
        document.getElementById("postTitle").textContent = post.title[lang];
        document.getElementById("postDesc").textContent = post.description[lang];

        // ‚≠ê SEO Meta Update
        document.getElementById("meta-title").content = post.title[lang];
        document.getElementById("meta-description").content = post.description[lang];
        document.getElementById("meta-image").content = post.url;

        // ‚≠ê Show card after loading
        setTimeout(() => {
            document.getElementById("loader").style.display = "none";
            document.getElementById("postCard").style.display = "block";
        }, 500);

    })

    .catch(() => {
        document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>Error Loading Post</h2>";
    });


// ‚≠ê Share Function
function sharePost() {
    const title = document.getElementById("postTitle").textContent;
    const text = document.getElementById("postDesc").textContent;
    const url = window.location.href;

    if (navigator.share) {
        navigator.share({ title, text, url });
    } else {
        navigator.clipboard.writeText(url);
        alert("Link Copied!");
    }
}
</script>

</body>
</html>
