<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK Community ‚Äì Post</title>

    <!-- üî• Dynamic Meta for SEO -->
    <meta id="meta-title" name="title" content="">
    <meta id="meta-description" name="description" content="">
    <meta id="meta-og-title" property="og:title" content="">
    <meta id="meta-og-desc" property="og:description" content="">
    <meta id="meta-og-image" property="og:image" content="">
    <meta property="og:type" content="article">

    <link rel="icon" href="https://deepakchauhanxai.xyz/images/dk-community.jpg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * { 
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --accent: #f59e0b;
            --dark: #0f172a;
            --light: #f8fafc;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --gradient-bg: radial-gradient(circle at top, #e0f2fe, #f9fafb);
            --card-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --neon-glow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-dark);
            min-height: 100vh;
        }

        .page-wrap {
            max-width: 900px;
            margin: 20px auto;
            padding: 10px 15px 30px;
        }

        /* üîπ Premium Header */
        .dk-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .dk-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .dk-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dk-avatar {
            width: 50px;
            height: 50px;
            border-radius: 14px;
            overflow: hidden;
            border: 2px solid var(--primary);
            box-shadow: var(--neon-glow);
        }

        .dk-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dk-text {
            display: flex;
            flex-direction: column;
        }

        .dk-text .title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .dk-text .subtitle {
            font-size: 12px;
            color: var(--text-light);
            font-weight: 500;
        }

        .lang-indicator {
            font-size: 12px;
            color: var(--text-light);
            font-weight: 600;
            padding: 6px 12px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 20px;
        }

        /* üîπ Premium Card */
        .post-card {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .post-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.03), rgba(245, 158, 11, 0.03));
            z-index: -1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .post-img-wrap {
            position: relative;
            background: #020617;
        }

        .post-img {
            width: 100%;
            max-height: 450px;
            object-fit: contain;
            background: #020617;
            transition: transform 0.3s ease;
        }

        .post-img:hover {
            transform: scale(1.02);
        }

        .post-chip {
            position: absolute;
            left: 15px;
            bottom: 15px;
            padding: 8px 16px;
            background: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .post-chip span {
            font-size: 14px;
        }

        .post-content {
            padding: 25px;
        }

        .post-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0 0 12px;
            color: var(--text-dark);
            line-height: 1.3;
        }

        .post-desc {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-light);
            white-space: pre-line;
            margin-bottom: 20px;
            font-weight: 400;
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 15px;
        }

        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn.danger {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff7ed;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .btn i {
            font-size: 14px;
        }

        .bottom-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .back-link {
            font-size: 13px;
            color: var(--primary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            color: var(--primary-dark);
            transform: translateX(-3px);
        }

        .signature {
            font-size: 11px;
            color: #9ca3af;
            font-style: italic;
        }

        /* üîπ Premium Skeleton Loader */
        .skeleton-wrap {
            background: #ffffff;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .skeleton {
            background: linear-gradient(90deg, #e5e7eb, #f9fafb, #e5e7eb);
            background-size: 300% 100%;
            animation: skeleton 1.2s ease infinite;
            border-radius: 8px;
        }

        @keyframes skeleton {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .skeleton-img {
            width: 100%;
            height: 250px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .skeleton-line {
            height: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .skeleton-line.short {
            width: 40%;
        }

        .skeleton-line.mid {
            width: 65%;
        }

        .skeleton-line.long {
            width: 85%;
        }

        /* üîπ Responsive Design */
        @media (max-width: 640px) {
            .dk-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .post-title {
                font-size: 20px;
            }
            
            .post-desc {
                font-size: 14px;
            }
            
            .control-row {
                justify-content: center;
            }
            
            .btn {
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
            
            .post-content {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .btn span {
                display: none;
            }
            
            .btn {
                padding: 14px;
                border-radius: 50%;
                width: 44px;
                height: 44px;
                justify-content: center;
            }
            
            .bottom-row {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
<div class="page-wrap">

    <!-- üîπ Header ‚Äì DK Community x AI Bhai -->
    <header class="dk-header">
        <div class="dk-brand">
            <div class="dk-avatar">
                <img src="https://deepakchauhanxai.xyz/images/dk-community.jpg" alt="DK Community">
            </div>
            <div class="dk-text">
                <span class="title">DK Community √ó AI Bhai</span>
                <span class="subtitle">Human + AI Real Stories & Suvichar</span>
            </div>
        </div>
        <div class="lang-indicator">
            <span id="langLabel">Language: EN</span>
        </div>
    </header>

    <!-- üîπ Skeleton while loading -->
    <div id="loader" class="skeleton-wrap">
        <div class="skeleton skeleton-img"></div>
        <div class="skeleton skeleton-line long"></div>
        <div class="skeleton skeleton-line mid"></div>
        <div class="skeleton skeleton-line short"></div>
    </div>

    <!-- üîπ Real Card -->
    <article id="postCard" class="post-card" style="display:none;">
        <div class="post-img-wrap">
            <img id="postImg" class="post-img" src="" alt="">
            <div class="post-chip">
                <span>‚ö°</span>
                <span id="postCategory">Motivation</span>
            </div>
        </div>
        <div class="post-content">
            <div class="meta-row">
                <span id="metaCategory">#motivational</span>
                <span id="metaId">ID: -</span>
            </div>

            <h1 id="postTitle" class="post-title"></h1>
            <p id="postDesc" class="post-desc"></p>

            <!-- üîπ Controls: Favorite, Download, Share -->
            <div class="control-row">
                <button id="favBtn" class="btn">
                    <i class="far fa-heart"></i>
                    <span>Add to Favorites</span>
                </button>

                <button id="downloadBtn" class="btn">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>

                <button id="shareBtn" class="btn primary">
                    <i class="fas fa-share-alt"></i>
                    <span>Share</span>
                </button>
            </div>

            <div class="bottom-row">
                <a href="index.html" class="back-link">
                    <i class="fas fa-arrow-left"></i>
                    Back to DK Community
                </a>
                <span class="signature">Deepak Chauhan √ó AI Bhai</span>
            </div>
        </div>
    </article>
</div>

<script>
    let currentPost = null;
    let currentLang = "en";

    // ‚≠ê Language detection with multiple sources
    function detectLang() {
        // 1. Pehle URL parameter check karo
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');
        if (urlLang) return urlLang;

        // 2. Phir localStorage check karo
        const saved = localStorage.getItem("selectedLanguage");
        if (saved) return saved;

        // 3. Phir browser language
        const browserLang = (navigator.language || "en").slice(0, 2);
        const supported = ["en","hi","ur","mr","es","fr","de","ja","zh","ar","pt","ru","bn","ta","te","kn","gu","pa"];
        return supported.includes(browserLang) ? browserLang : "en";
    }

    // ‚≠ê NEW: Language sync system
    function syncLanguage() {
        const newLang = detectLang();
        if (newLang !== currentLang) {
            currentLang = newLang;
            updateLangLabel();
            
            // URL update karo taaki refresh pe bhi language maintain rahe
            const url = new URL(window.location);
            url.searchParams.set('lang', newLang);
            window.history.replaceState({}, '', url);
            
            // Content refresh karo
            if (currentPost) {
                renderPost();
            }
        }
    }

    function updateLangLabel() {
        const el = document.getElementById("langLabel");
        if (el) {
            const langNames = {
                en: "ENGLISH", hi: "HINDI", ur: "URDU", mr: "MARATHI", 
                es: "SPANISH", fr: "FRENCH", de: "GERMAN", ja: "JAPANESE",
                zh: "CHINESE", ar: "ARABIC", pt: "PORTUGUESE", ru: "RUSSIAN",
                bn: "BENGALI", ta: "TAMIL", te: "TELUGU", kn: "KANNADA",
                gu: "GUJARATI", pa: "PUNJABI"
            };
            el.textContent = "Language: " + (langNames[currentLang] || currentLang.toUpperCase());
        }
        document.documentElement.lang = currentLang;
    }

    // ‚≠ê Fill UI from currentPost + lang
    function renderPost() {
        if (!currentPost) return;

        const title = currentPost.title[currentLang] || currentPost.title["en"] || "";
        const desc  = currentPost.description[currentLang] || currentPost.description["en"] || "";
        const imgUrl = currentPost.url;
        const cat    = currentPost.category || "motivational";

        document.getElementById("postImg").src = imgUrl;
        document.getElementById("postImg").alt = title;
        document.getElementById("postTitle").textContent = title;
        document.getElementById("postDesc").textContent = desc;
        document.getElementById("postCategory").textContent = cat.toUpperCase();
        document.getElementById("metaCategory").textContent = "#" + cat;
        document.getElementById("metaId").textContent = "ID: " + currentPost.id;

        // ‚≠ê SEO meta update
        document.getElementById("meta-title").content = title;
        document.getElementById("meta-description").content = desc.slice(0, 150);
        document.getElementById("meta-og-title").content = title;
        document.getElementById("meta-og-desc").content = desc.slice(0, 150);
        document.getElementById("meta-og-image").content = imgUrl;

        updateFavoriteButton();
    }

    // ‚≠ê Favorite system (same storage key: dkFavorites)
    function getFavorites() {
        try {
            return JSON.parse(localStorage.getItem("dkFavorites") || "[]");
        } catch {
            return [];
        }
    }

    function isFavorite(id) {
        return getFavorites().some(f => f.id === id);
    }

    function updateFavoriteButton() {
        const favBtn = document.getElementById("favBtn");
        if (!favBtn || !currentPost) return;

        const span = favBtn.querySelector("span");
        const icon = favBtn.querySelector("i");
        
        if (isFavorite(currentPost.id)) {
            favBtn.classList.add("danger");
            icon.className = "fas fa-heart";
            span.textContent = "Remove Favorite";
        } else {
            favBtn.classList.remove("danger");
            icon.className = "far fa-heart";
            span.textContent = "Add to Favorites";
        }
    }

    function toggleFavorite() {
        if (!currentPost) return;

        let favs = getFavorites();
        const idx = favs.findIndex(f => f.id === currentPost.id);

        if (idx > -1) {
            favs.splice(idx, 1);
        } else {
            favs.push(currentPost);
        }

        localStorage.setItem("dkFavorites", JSON.stringify(favs));
        updateFavoriteButton();
        
        // Animation effect
        const favBtn = document.getElementById("favBtn");
        favBtn.style.transform = "scale(1.1)";
        setTimeout(() => {
            favBtn.style.transform = "scale(1)";
        }, 200);
    }

    // ‚≠ê Download
    function downloadImage(url) {
        try {
            const link = document.createElement("a");
            link.href = url;
            link.download = `dk-community-${currentPost.id}.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Download animation
            const downloadBtn = document.getElementById("downloadBtn");
            const originalHTML = downloadBtn.innerHTML;
            downloadBtn.innerHTML = '<i class="fas fa-check"></i><span>Downloaded!</span>';
            setTimeout(() => {
                downloadBtn.innerHTML = originalHTML;
            }, 2000);
        } catch (e) {
            alert("Download failed. Please try again.");
        }
    }

    // ‚≠ê Share - IMPROVED: Language include karega
    function sharePost() {
        if (!currentPost) return;
        const title = currentPost.title[currentLang] || currentPost.title["en"] || "DK Community";
        const text  = currentPost.description[currentLang] || currentPost.description["en"] || "";
        
        // Current language ke saath share URL banaye
        const url = new URL(window.location);
        url.searchParams.set('lang', currentLang);
        const shareUrl = url.toString();

        if (navigator.share) {
            navigator.share({ 
                title: `DK Community: ${title}`,
                text: text,
                url: shareUrl 
            }).catch(() => {});
        } else {
            navigator.clipboard.writeText(shareUrl).then(() => {
                // Share success animation
                const shareBtn = document.getElementById("shareBtn");
                const originalHTML = shareBtn.innerHTML;
                shareBtn.innerHTML = '<i class="fas fa-check"></i><span>Copied!</span>';
                setTimeout(() => {
                    shareBtn.innerHTML = originalHTML;
                }, 2000);
            }).catch(() => {
                prompt("Copy this link:", shareUrl);
            });
        }
    }

    // ‚≠ê MAIN LOAD - IMPROVED
    (function(){
        // Pehle language set karo
        currentLang = detectLang();
        updateLangLabel();

        const params = new URLSearchParams(window.location.search);
        const idParam = params.get("id");
        const postId = parseInt(idParam, 10);

        if (!postId) {
            document.body.innerHTML = `
                <div style="display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column; gap:20px; background: var(--gradient-bg);">
                    <h2 style="color:var(--text-dark); text-align:center;">Invalid Post ID</h2>
                    <a href="index.html" style="color:var(--primary); text-decoration:none; font-weight:500;">‚Üê Back to Home</a>
                </div>`;
            return;
        }

        // Demo data agar JSON fetch fail ho jaye
        const demoData = {
            images: [
                {
                    id: 1,
                    url: "https://deepakchauhanxai.xyz/images/dk-community.jpg",
                    category: "motivational",
                    title: {
                        en: "Your Success Journey Starts Today",
                        hi: "‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§Ü‡§ú ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à"
                    },
                    description: {
                        en: "Embrace the challenges, learn from failures, and keep moving forward. Every step you take brings you closer to your dreams. Remember, the only limit is the one you set in your mind. Break free and achieve greatness!",
                        hi: "‡§ö‡•Å‡§®‡•å‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ó‡§≤‡•á ‡§≤‡§ó‡§æ‡§è‡§Ç, ‡§Ö‡§∏‡§´‡§≤‡§§‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§§‡•á ‡§∞‡§π‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§†‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡§∞ ‡§ï‡§¶‡§Æ ‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§∏‡§™‡§®‡•ã‡§Ç ‡§ï‡•á ‡§ï‡§∞‡•Ä‡§¨ ‡§≤‡•á ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡•á‡§Ç, ‡§è‡§ï‡§Æ‡§æ‡§§‡•ç‡§∞ ‡§∏‡•Ä‡§Æ‡§æ ‡§µ‡§π ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§Æ‡§® ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§π‡•ã ‡§ú‡§æ‡§ì ‡§î‡§∞ ‡§Æ‡§π‡§æ‡§®‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•ã!"
                    }
                }
            ]
        };

        // Try to fetch from your JSON, fallback to demo data
        fetch("https://deepakchauhanxai.xyz/testing/data/images.json?v=" + Date.now())
            .then(res => {
                if (!res.ok) throw new Error('Network response was not ok');
                return res.json();
            })
            .then(data => {
                const list = data.images || demoData.images;
                const found = list.find(img => img.id === postId);

                if (!found) {
                    document.body.innerHTML = `
                        <div style="display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column; gap:20px; background: var(--gradient-bg);">
                            <h2 style="color:var(--text-dark); text-align:center;">Post Not Found</h2>
                            <a href="index.html" style="color:var(--primary); text-decoration:none; font-weight:500;">‚Üê Back to Home</a>
                        </div>`;
                    return;
                }

                currentPost = found;
                renderPost();

                // Show card, hide loader
                setTimeout(() => {
                    const loader = document.getElementById("loader");
                    const card   = document.getElementById("postCard");
                    if (loader) loader.style.display = "none";
                    if (card)   card.style.display = "block";
                }, 500);

                // Buttons event listeners
                document.getElementById("favBtn").onclick = toggleFavorite;
                document.getElementById("downloadBtn").onclick = () => downloadImage(currentPost.url);
                document.getElementById("shareBtn").onclick = sharePost;
            })
            .catch(() => {
                // Use demo data if fetch fails
                const list = demoData.images;
                const found = list.find(img => img.id === postId);
                
                if (found) {
                    currentPost = found;
                    renderPost();
                    
                    setTimeout(() => {
                        const loader = document.getElementById("loader");
                        const card   = document.getElementById("postCard");
                        if (loader) loader.style.display = "none";
                        if (card)   card.style.display = "block";
                    }, 500);

                    document.getElementById("favBtn").onclick = toggleFavorite;
                    document.getElementById("downloadBtn").onclick = () => downloadImage(currentPost.url);
                    document.getElementById("shareBtn").onclick = sharePost;
                } else {
                    document.body.innerHTML = `
                        <div style="display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column; gap:20px; background: var(--gradient-bg);">
                            <h2 style="color:var(--text-dark); text-align:center;">Error Loading Post</h2>
                            <a href="index.html" style="color:var(--primary); text-decoration:none; font-weight:500;">‚Üê Back to Home</a>
                        </div>`;
                }
            });
    })();

    // ‚≠ê Real-time language sync
    window.addEventListener("languageChanged", syncLanguage);
    
    // Storage changes (dusre tab se) bhi suno
    window.addEventListener("storage", (e) => {
        if (e.key === "selectedLanguage") {
            syncLanguage();
        }
    });

    // Optional: Har 2 second pe check karo for language changes
    setInterval(syncLanguage, 2000);
</script>
                        
</body>
</html>
